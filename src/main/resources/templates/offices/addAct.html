<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>SISDI-Crear Acta</title>

        <link th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet"/>
        <link th:href="@{/css/default.css}" rel="stylesheet"/>
        <link th:href="@{/css/errors.css}" rel="stylesheet"/>
        <link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css" rel="stylesheet"/>
        <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet"/>
        <link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet"/>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script th:src="@{/bootstrap/js/jquery.js}"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
        <link href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css" rel="stylesheet"/>
        <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker.es.min.js" type="text/javascript"></script>
        <script th:src="@{/js/calendar.js}"></script>
       <script th:src="@{/js/script.js}"></script>

    </head>

    <body>
        <header th:insert="menu/Head :: menu"></header>
        <div class="mt-2 col-md-1">
            <br> <br>
        </div>

        
       
        <main>
            <div class="container mx-auto">
                <div id="titulo">
                    <h3 class='font-italic text-center' id='titleh3'>Crear Acta</h3>
                </div>
                <div class="mx-auto w-75">
                    <form class="form was-validated" method="POST" th:action="@{/offices/saveAct/{expedienteId} (expedienteId=${actAdd.fileName})}" th:object="${actAdd}" id="add-act" >
                        <table class="table table-borderless">
                            <tr>
                                <td>
                                    <span>Nombre del Acta</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input placeholder="Acta" class="form-control" name="filename" id="filename" th:field="*{fileName}"  readonly="readonly"/>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                             <tr>
                                <td>
                                    <span>Fecha de Ingreso Al Archivo Central</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input th:value="${#dates.format(date, 'dd/MM/yyyy')}"  class="form-control" th:field="*{dateFile}" readonly="readonly"/>
                                        <span class="input-group-addon ">
                                            <img class="icon-img" th:src="@{/images/calendar.svg}">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            
                            
                            
                            <tr>
                                <td>
                                    <span>Fecha de Destruccion</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input th:value="${#dates.format(date, 'dd/MM/yyyy')}"  class="form-control" th:field="*{dateCreate}" readonly="readonly"/>
                                        <span class="input-group-addon ">
                                            <img class="icon-img" th:src="@{/images/calendar.svg}">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                           
                           
                           
                           
                                
                                <td>
                                    <span>Resumen</span>
                                    
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <textarea rows="4" class="w-100" name="observaciones" id="observaciones" placeholder="Escriba aquÃ­ el resumen" 
                                                  style="resize: none;" th:field="*{observations}"></textarea>                             
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                          
                            </tr>
                            
                           
                           
                            <tr>
                                <td colspan="2" class="text-lg-right">
                                    <a  id="a-del" class="btn btn-primary mt-2">Agregar Acta y Eliminar Expediente</a>
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>
            </div>

        </main>
       
        <script th:src="@{/js/calendar.js}"></script>
        <script >
        $(function () {
            $('#a-del').click(function () {

                swal({
                    text: "Esta seguro que desea eliminar este expediente?",
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#ff0000',
                    cancelButtonText: 'cancel',
                    cancelButtonColor: '#4cd964',
                    confirmButtonText: 'delete',

                }).then(function (isConfirm) {
                    if (isConfirm) {
                        $.get({
                            url: '/CMS/delbook/',
                            data: {
                                val: $('#a-del').parent().prev().text()
                            },
                            success: function (data) {
                                if (data) {
                                    $('#a-del').parent().parent().remove();

                                }
                            }
                        });
                        swal({
                                text: "El Expediente ha sido borrado",
                                type: 'success',
                                showCancelButton: false,
                                showConfirmButton: false
                            }
                        );
                         setTimeout(function () {
                            //window.location.href = '/offices/saveAct/{expedienteId} (expedienteId=${actAdd.fileName})';
                             document.forms["add-act"].submit()
                        }, 2000)


                    }
                }, function (dismiss) {
                    if (dismiss === 'cancel') {
                        swal(
                            'cancel',
                            '',
                            'error'
                        )
                    }
                })


            })

        })
       </script>
    </body>

</html>
